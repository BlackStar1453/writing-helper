# Premium Type åŠŸèƒ½å®Œæ•´æµ‹è¯•æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—æä¾›äº† Premium Type åŠŸèƒ½çš„å®Œæ•´æµ‹è¯•æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ Stripe æµ‹è¯•æ¨¡å¼å’Œ Xorpay çœŸå®æ”¯ä»˜æµ‹è¯•ã€‚

## ğŸ¯ æµ‹è¯•ç›®æ ‡

éªŒè¯ä»¥ä¸‹åŠŸèƒ½çš„å®Œæ•´æ€§ï¼š
- âœ… ç”¨æˆ·å¯ä»¥é€‰æ‹©ä½¿ç”¨è‡ªå·±çš„ API Key æˆ– Elick æœåŠ¡
- âœ… æ”¯ä»˜æˆåŠŸå `premium_type` å­—æ®µæ­£ç¡®è®¾ç½®
- âœ… ä¸¤ç§æ”¯ä»˜æ–¹å¼ï¼ˆStripe + Xorpayï¼‰éƒ½æ”¯æŒ Premium Type åŠŸèƒ½
- âœ… å‰ç«¯ switchbox ä¸åç«¯æ•°æ®åº“å­—æ®µæ­£ç¡®åŒæ­¥

## ğŸ§ª æµ‹è¯•æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: Stripe æµ‹è¯•æ¨¡å¼ï¼ˆå…è´¹ï¼‰

#### ä¼˜ç‚¹ï¼š
- âœ… å®Œå…¨å…è´¹
- âœ… å¯é‡å¤æµ‹è¯•
- âœ… æµ‹è¯•å¡å·ä¸°å¯Œ

#### æµ‹è¯•æ­¥éª¤ï¼š
```bash
# 1. æ¸…é™¤ç¼“å­˜
node scripts/clear-pricing-cache.js

# 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 3. è®¿é—® pricing é¡µé¢
# http://localhost:3000/pricing

# 4. é€‰æ‹© Premium è®¡åˆ’
# 5. åˆ‡æ¢"ä½¿ç”¨è‡ªå·±çš„ API Key"å¼€å…³
# 6. é€‰æ‹© Stripe æ”¯ä»˜
# 7. ä½¿ç”¨æµ‹è¯•å¡: 4242424242424242
# 8. éªŒè¯æ”¯ä»˜æˆåŠŸåçš„ premium_type å­—æ®µ
```

#### éªŒè¯å‘½ä»¤ï¼š
```bash
./scripts/test-stripe-checkout-premium-type.sh
```

### æ–¹æ¡ˆ 2: Xorpay çœŸå®æ”¯ä»˜ï¼ˆ0.1 å…ƒï¼‰

#### ä¼˜ç‚¹ï¼š
- âœ… çœŸå®æ”¯ä»˜ç¯å¢ƒ
- âœ… å®Œæ•´å›è°ƒæµç¨‹
- âœ… ç”Ÿäº§ç¯å¢ƒéªŒè¯

#### è´¹ç”¨ï¼š
- ğŸ’° 0.1 å…ƒ Ã— æµ‹è¯•æ¬¡æ•°
- ğŸ’° å»ºè®®æµ‹è¯• 2 æ¬¡ï¼ˆæ¯ç§æ¨¡å¼å„ä¸€æ¬¡ï¼‰
- ğŸ’° æ€»è´¹ç”¨çº¦ 0.2 å…ƒ

#### æµ‹è¯•æ­¥éª¤ï¼š
```bash
# 1. è®¾ç½®æµ‹è¯•ç¯å¢ƒ
./scripts/setup-xorpay-test-payment.sh

# 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 3. è®¿é—®æµ‹è¯•é¡µé¢
# http://localhost:3000/test-premium-type

# 4. é€‰æ‹© premium_type é€‰é¡¹
# 5. ç‚¹å‡»"å¼€å§‹ 0.1 å…ƒçœŸå®æ”¯ä»˜æµ‹è¯•"
# 6. å®Œæˆå¾®ä¿¡/æ”¯ä»˜å®æ‰«ç æ”¯ä»˜
# 7. éªŒè¯æ”¯ä»˜ç»“æœ
```

#### éªŒè¯å‘½ä»¤ï¼š
```bash
./scripts/verify-test-payment.sh your-email@example.com
```

## ğŸ“Š æµ‹è¯•çŸ©é˜µ

| æ”¯ä»˜æ–¹å¼ | æ¨¡å¼ | è´¹ç”¨ | premium_type | éªŒè¯æ–¹æ³• |
|---------|------|------|--------------|----------|
| Stripe | use_own_key = true | å…è´¹ | 'use_own_key' | æµ‹è¯•å¡æ”¯ä»˜ |
| Stripe | use_own_key = false | å…è´¹ | 'use_elick' | æµ‹è¯•å¡æ”¯ä»˜ |
| Xorpay | use_own_key = true | 0.1å…ƒ | 'use_own_key' | çœŸå®æ”¯ä»˜ |
| Xorpay | use_own_key = false | 0.1å…ƒ | 'use_elick' | çœŸå®æ”¯ä»˜ |

## ğŸ”§ å¯ç”¨çš„æµ‹è¯•è„šæœ¬

### ä»£ç é€»è¾‘æ£€æµ‹
```bash
# Stripe åŠŸèƒ½æ£€æµ‹
./scripts/test-stripe-checkout-premium-type.sh

# Xorpay åŠŸèƒ½æ£€æµ‹
./scripts/test-xorpay-premium-type.sh

# è®¢å•è§£ææµ‹è¯•
node scripts/test-xorpay-order-parsing.js

# æ•´ä½“é…ç½®æ£€æŸ¥
./scripts/check-premium-type-setup.sh
```

### ç¼“å­˜ç®¡ç†
```bash
# æ£€æŸ¥ç¼“å­˜çŠ¶æ€
node scripts/clear-pricing-cache.js check

# æ¸…é™¤æ‰€æœ‰ç¼“å­˜
node scripts/clear-pricing-cache.js clear
```

### çœŸå®æ”¯ä»˜æµ‹è¯•
```bash
# è®¾ç½® Xorpay æµ‹è¯•ç¯å¢ƒ
./scripts/setup-xorpay-test-payment.sh

# éªŒè¯æ”¯ä»˜ç»“æœ
./scripts/verify-test-payment.sh user@example.com
```

## ğŸ“‹ æµ‹è¯•æ£€æŸ¥æ¸…å•

### ç¯å¢ƒå‡†å¤‡
- [ ] æ•°æ®åº“ `premium_type` å­—æ®µå·²æ·»åŠ 
- [ ] Stripe æµ‹è¯•äº§å“å·²åˆ›å»º
- [ ] Xorpay æµ‹è¯•äº§å“å·²é…ç½®
- [ ] ç¯å¢ƒå˜é‡æ­£ç¡®è®¾ç½®

### Stripe æµ‹è¯•
- [ ] ç¼“å­˜å·²æ¸…é™¤
- [ ] Premium è®¡åˆ’æ­£å¸¸æ˜¾ç¤º
- [ ] switchbox åŠŸèƒ½æ­£å¸¸
- [ ] æµ‹è¯•å¡æ”¯ä»˜æˆåŠŸ
- [ ] premium_type å­—æ®µæ­£ç¡®æ›´æ–°

### Xorpay æµ‹è¯•
- [ ] æµ‹è¯•äº§å“é…ç½®æ­£ç¡®
- [ ] æµ‹è¯•é¡µé¢å¯è®¿é—®
- [ ] 0.1 å…ƒæ”¯ä»˜æˆåŠŸ
- [ ] å›è°ƒå¤„ç†æ­£å¸¸
- [ ] premium_type å­—æ®µæ­£ç¡®æ›´æ–°

### æ•°æ®éªŒè¯
- [ ] æ•°æ®åº“å­—æ®µå€¼æ­£ç¡®
- [ ] è®¢å•ä¿¡æ¯è§£ææ­£ç¡®
- [ ] ä¸¤ç§æ¨¡å¼éƒ½æµ‹è¯•é€šè¿‡

## ğŸ› å¸¸è§é—®é¢˜æ’é™¤

### é—®é¢˜ 1: è®¡åˆ’æ˜¾ç¤º"ä¸å¯ç”¨"
**åŸå› **: ç¼“å­˜ä¸­çš„äº§å“æ•°æ®ä¸ºç©º
**è§£å†³**: è¿è¡Œ `node scripts/clear-pricing-cache.js clear`

### é—®é¢˜ 2: premium_type å­—æ®µæœªæ›´æ–°
**åŸå› **: æ”¯ä»˜å›è°ƒå¤„ç†é€»è¾‘é—®é¢˜
**è§£å†³**: æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—ï¼ŒéªŒè¯ metadata ä¼ é€’

### é—®é¢˜ 3: Xorpay æµ‹è¯•äº§å“ä¸æ˜¾ç¤º
**åŸå› **: éå¼€å‘ç¯å¢ƒæˆ–é…ç½®é”™è¯¯
**è§£å†³**: ç¡®ä¿ `NODE_ENV=development` ä¸”ä»·æ ¼é…ç½®æ­£ç¡®

### é—®é¢˜ 4: è®¢å•è§£ææµ‹è¯•å¤±è´¥
**åŸå› **: è®¢å•ä¿¡æ¯æ ¼å¼ä¸ä¸€è‡´
**è§£å†³**: è¿è¡Œä¿®å¤åçš„è§£ææµ‹è¯•è„šæœ¬

## ğŸ¯ æµ‹è¯•æˆåŠŸæ ‡å‡†

### Stripe æµ‹è¯•æˆåŠŸæ ‡å‡†
- âœ… æ”¯ä»˜æµç¨‹å®Œæ•´æ— é”™è¯¯
- âœ… premium_type å­—æ®µæ ¹æ® switchbox çŠ¶æ€æ­£ç¡®è®¾ç½®
- âœ… ç”¨æˆ·è®¢é˜…çŠ¶æ€æ­£ç¡®æ¿€æ´»

### Xorpay æµ‹è¯•æˆåŠŸæ ‡å‡†
- âœ… 0.1 å…ƒæ”¯ä»˜æˆåŠŸå®Œæˆ
- âœ… æ”¯ä»˜å›è°ƒæ­£ç¡®å¤„ç†
- âœ… premium_type å­—æ®µæ ¹æ®é€‰æ‹©æ­£ç¡®è®¾ç½®
- âœ… è®¢å•ä¿¡æ¯æ­£ç¡®è§£æ

## ğŸ“ˆ æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```
# Premium Type åŠŸèƒ½æµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•ç¯å¢ƒ
- æ—¥æœŸ: YYYY-MM-DD
- ç¯å¢ƒ: Development
- æµ‹è¯•äººå‘˜: [å§“å]

## Stripe æµ‹è¯•ç»“æœ
- [ ] use_own_key = true â†’ premium_type = 'use_own_key'
- [ ] use_own_key = false â†’ premium_type = 'use_elick'

## Xorpay æµ‹è¯•ç»“æœ
- [ ] use_own_key = true â†’ premium_type = 'use_own_key' (è´¹ç”¨: 0.1å…ƒ)
- [ ] use_own_key = false â†’ premium_type = 'use_elick' (è´¹ç”¨: 0.1å…ƒ)

## æ€»ç»“
- æµ‹è¯•é€šè¿‡ç‡: __/4
- å‘ç°é—®é¢˜: [æè¿°]
- å»ºè®®æ”¹è¿›: [å»ºè®®]
```

## ğŸš€ éƒ¨ç½²å‰éªŒè¯

åœ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå‰ï¼Œè¯·ç¡®ä¿ï¼š
1. âœ… æ‰€æœ‰æµ‹è¯•è„šæœ¬éƒ½é€šè¿‡
2. âœ… Stripe å’Œ Xorpay éƒ½æµ‹è¯•æˆåŠŸ
3. âœ… æ•°æ®åº“å­—æ®µæ­£ç¡®è®¾ç½®
4. âœ… å‰ç«¯ UI åŠŸèƒ½æ­£å¸¸
5. âœ… æ”¯ä»˜å›è°ƒå¤„ç†æ­£ç¡®

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0  
**æœ€åæ›´æ–°**: 2025-09-01  
**çŠ¶æ€**: âœ… å®Œæ•´æµ‹è¯•æ–¹æ¡ˆ
